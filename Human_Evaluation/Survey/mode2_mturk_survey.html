<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FollowupQG Data Annotation Task</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html,
        body {
            height: 140%;
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
        }

        .container {
            display: flex;
            width: 100%;
            max-width: 1200px;
            gap: 20px;
        }

        .section {
            background-color: #ffffff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .sub-section {
            background-color: #e8f4fd;
            border: 1px solid #a0c4ff;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .sub-section h2 {
            margin-bottom: 15px;
            color: #00509e;
        }

        .sub-section p {
            margin-bottom: 10px;
            color: #333;
            line-height: 1.6;
        }

        .sub-section ul {
            list-style-type: disc;
            margin-left: 20px;
            margin-bottom: 10px;
        }

        .sub-section ul li {
            margin-bottom: 8px;
            color: #333;
        }

        .sub-section-examples {
            background-color: #ffffff;
            border: 1px solid #a0c4ff;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .instructions {
            text-align: center;
        }

        .examples {
            background-color: #dcedfa;
            border: 1px solid #a0c4ff;
        }

        .character-input-container {
            flex: 1;
        }

        .crowd-form {
            flex: 1.5;
        }

        .story-container {
            flex: 1.2;
        }

        .example-story-container {
            flex: 0.5;
        }

        .example-button-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            /* Space between buttons */
            padding: 10px;
        }

        .example-buttons {
            background-color: #4CAF50;
            /* Green background */
            color: white;
            /* White text */
            padding: 15px 32px;
            /* Larger padding for better click area */
            font-size: 16px;
            /* Larger text */
            border: none;
            /* Remove default border */
            border-radius: 8px;
            /* Rounded corners */
            cursor: pointer;
            /* Show pointer cursor on hover */
            transition: background-color 0.3s;
            /* Smooth transition on hover */
        }

        .example-buttons:hover {
            background-color: #45a049;
        }

        .example-buttons.selected {
            background-color: #FF9800;
            /* Orange color for selected buttons */
            color: white;
            /* Keep the text white */
            transform: scale(1.05);
            /* Slightly enlarge the selected button for emphasis */
        }

        .section h2,
        .section h3 {
            margin-bottom: 20px;
            color: #333;
        }

        .existing-characters {
            margin-bottom: 20px;
        }

        .existing-characters label {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            cursor: pointer;
            color: #555;
        }

        .existing-characters input[type="checkbox"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .question-block {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .question-block h4 {
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
        }

        .ratings-section {
            margin-top: 15px;
        }

        .ratings-section h5 {
            margin-bottom: 10px;
            color: #333;
            font-size: 14px;
        }

        .ratings-section .rating-group {
            margin-bottom: 15px;
        }

        .ratings-section label {
            margin-right: 15px;
            color: #555;
            cursor: pointer;
        }

        .ratings-section input[type="radio"] {
            margin-right: 5px;
            cursor: pointer;
        }

        .navigation-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .navigation-buttons button {
            background-color: #4CAF50;
            color: #fff;
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .navigation-buttons button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
        }

        .navigation-buttons button:active {
            background-color: #3e8e41;
            transform: translateY(0);
        }

        .navigation-buttons button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        .story-container h3 {
            margin-bottom: 20px;
            color: #333;
        }

        .story-container p {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #444;
        }

        .story-container .highlighted {
            background-color: #fff9c4;
            padding: 5px;
            border-radius: 4px;
        }

        .full-body {
            display: flex;
            flex-direction: column;
            padding-left: 10vw;
            padding-right: 10vw;
        }

        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 25px;
            margin-bottom: 20px;
            overflow: hidden;
            height: 20px;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: #4CAF50;
            transition: width 0.3s ease;
        }

        .validation-message {
            color: red;
            margin-top: 10px;
            font-size: 14px;
        }

        /* Hide remaining questions by default */
        .remaining-questions {
            display: none;
        }

        @media (max-width: 1200px) {
            .container {
                flex-direction: column;
                align-items: stretch;
            }

            .section {
                height: auto;
            }
        }
    </style>
</head>

<body>
    <div class="full-body">
        <div class="section">
            <div class="sub-section">
                <div class="instructions">
                    <h2>Instructions</h2>
                    <h3>Job Description</h3>
                    <p>Welcome, and thank you for participating in this text evaluation task! In this job, you’ll be helping us evaluate the quality of follow-up questions generated by a language model called BART.</p>
                    <p>
                        For each task, we will provide you with a pair consisting of a question and answer collected from Reddit’s “Explain Like I’m Five” (ELI5) forum. You will be asked to evaluate the quality of the follow-up question generated by BART. These questions and answers aim to provide layperson-friendly explanations for real-life queries.                         
                    </p>
                    <p>Our data may contain noise, such as invalid follow-up questions, errors, lack of reasoning, or follow-up
                        questions unrelated to the original question or answer. Your role is to help us identify these noisy samples.</p>
                    <p>For each task, you will be shown one triple (question, answer, follow-up question). Carefully
                        review each component and answer the following questions based on your judgment:</p>
                    <div
                        style="background-color: #d8ebf5; padding: 15px; border-radius: 8px; margin-top: 15px; margin-left: 100px; margin-right: 100px">
                        <h4>Questions:</h4>
                        <br>
                        <ol style="text-align: left; display: inline-block; margin: 0; padding-left: 20px;">
                            <li><strong>Q1:</strong> Do you think the follow-up question is a valid question?<br>
                                <br><strong>A:</strong> Yes 
                                <br><strong>B:</strong> No
                            </li>
                            <br>
                            <li><strong>Q2:</strong> How relevant is the follow-up question to the original question and answer?<br>
                                <br>
                                <strong>A:</strong> Strongly Related
                                <br>
                                <strong>B:</strong> Related
                                <br>
                                <strong>C:</strong> Slightly Related
                                <br>
                                <strong>D:</strong> Not Related
                            </li>
                            <br>
                            <li><strong>Q3:</strong> Does the follow-up question contain any of the following errors?<br>
                                <br>
                                <strong>A:</strong> No Errors
                                <br>
                                <strong>B:</strong> Redundant (No new information added)
                                <br>
                                <strong>C:</strong> Repetitive (Follow-up is too similar to the original Question)
                                <br>
                                <strong>D:</strong> Wrong Semantic Collocation (Grammatically / Syntactically / Pragmatically Incorrect)
                                <br>
                                <strong>E:</strong> Other Errors
                            </li>
                            <br>
                            <li><strong>Q4:</strong> Does generating this follow-up question require reasoning?<br>
                                <br>
                                <strong>A:</strong> Requires complex amount of reasoning
                                <br>
                                <strong>B:</strong> Requires moderate amount of reasoning
                                <br>
                                <strong>C:</strong> Requires minimal amount of reasoning
                                <br>
                                <strong>D:</strong> Does not require any reasoning
                            </li>
                            <br>
                            <li><strong>Q5:</strong> Does the follow-up question contain new information for the audience?<br>
                                <br>
                                <strong>A:</strong> Introduces a lot of new information
                                <br>
                                <strong>B:</strong> Introduces some new information
                                <br>
                                <strong>C:</strong> Introduces little new information
                                <br>
                                <strong>D:</strong> Does not introduce any new information
                            </li>
                        </ol>
                    </div>
                    <br>
                    <h3 style="color: red">Please Note:</h3>
                    <h4 style="color: red;">After answering all questions for a single task, click next to move to the
                        next sample. <br>Once you complete all tasks, press submit to complete the survey. <br>We will be manually evaluating a few of your responses to confirm that they are reasonable.</h4>
                    <br>
                </div>
                <div class="examples">
                    <div style="display: flex; width: 100%;">
                        <div class="example-button-container"
                            style="width: 30%; border: 1px solid #a0c4ff; padding: 20px;">
                            <h4 style="text-align: center;">Follow-up Question That Are...</h4>
                            <hr>
                            <button class="example-buttons" onclick="changeContent('valid_invalid_example', this)">[Q1]
                                Valid / Invalid
                            </button>
                            <button class="example-buttons"
                                onclick="changeContent('relevant_irrelevant_example', this)">[Q2] Relevant / Irrelevant
                            </button>
                            <br>
                            <h4 style="text-align: center;">Follow-up Question That Have...</h4>
                            <hr>
                            <button class="example-buttons" onclick="changeContent('errors_example', this)">[Q3] Errors
                            </button>
                            <button class="example-buttons" onclick="changeContent('reasoning_example', this)">[Q3]
                                Reasoning
                            </button>
                            <button class="example-buttons"
                                onclick="changeContent('new_information_example', this)">[Q5] New Information
                            </button>
                        </div>
                        <div id="right-section" style="width: 70%; border: 1px solid #a0c4ff; padding: 20px;">
                            <h2 style="text-align: center;">Select from one of the options on the left to view its
                                example</h2>
                        </div>
                    </div>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>

            <div class="section">
                <div class="container">
                    <div class="section story-container">
                        <h2 style="text-align:center">Data to Annotate</h2>
                        <div id="data_container">
                        </div>
                    </div>
                    <crowd-form class="section crowd-form">
                        <div class="form-container">
                            <h2 style="text-align:center">Data Annotation Questions</h2>
                            <div id="annotation-questions-container">
                            </div>
                        </div>

                        <div class="navigation-buttons">
                            <!--<button id="prev-btn" type="button" disabled>Previous</button>-->
                            <button id="next-btn" type="button">Next</button>
                        </div>
                        <crowd-button id="crowd-button" form-action="submit" disabled=true
                            style="background-color: green;">
                            Submit
                        </crowd-button>
                    </crowd-form>
                </div>
            </div>

            <div class="validation-message" id="validation-message" style="display: none;">
                Please select at least one character and complete all associated questions to proceed.
            </div>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://assets.crowd.aws/crowd-html-elements.js"></script>

        <script>
            const examples = {
                valid_invalid_example: `
                    <div style="text-align: center;">
                        <h3>Valid/Invalid Question Guideline</h3>
                        <h4>Our Question: </h4><p>Do you think the follow-up question is a valid
                        question?</p>
                        <h4>Your Options:</h4> <p>A. Yes B. No</p>
                        <p>Guideline: The follow-up question might contain
                        multiple sentences but it should consist of at least
                        one valid question. A valid question must be in
                        question format and ask meaningful information,
                        including Wh-questions (what/why/where/etc.),
                        open-ended questions, probing questions and etc.
                        Examples for invalid questions: “10000 meters?
                        really?”, which are often used in conversational
                        speech to express feelings instead of asking new
                        information.</p>
                    </div>

                    <hr>
                    <br>

                    <h3 style="text-align: center;">Valid Follow-up Questions Example #1</h3>
                    <h4><b>Initial Question:</b></h4>
                    <p>ELI5: Why is the sea calm in the mornings?</p>
                    <h4><b>Initial Answer:</b></h4>
                    <p>There are two types of waves which can turn a flat sea into a rougher one - swell waves and wind waves. Swell waves can arrive at any time of day, but because wind waves are generated by the wind, they only develop when the wind begins to blow steadily. Since wind speeds are often low at night, and increase during the daytime, wind waves often die out during the night, leading to a relatively flat sea (perhaps with swell waves) in the early morning. During the day, the wind waves increase in size as the wind speed increases, leading to a rougher, more choppy, sea surface during the afternoon and evening.</p>
                    <h4><b>Follow-up Question:</b></h4>
                    <p>Now it’s time for my question. Why are winds always weak in the morning and very strong during the day?</p>

                    <h4><b>Reason For Being Valid</b></h4>
                    <p>Reason: The follow-up question is a “Why” question, asking specific reasons about the change of the winds during the day. Therefore, it is a valid question.</p>

                    <hr>
                    <br>

                    <h3 style="text-align: center;">Invalid Follow-up Questions Example #1</h3>
                    <h4><b>Initial Question:</b></h4>
                    <p>Why do seahorses still existed?</p>
                    <h4><b>Initial Answer:</b></h4>
                    <p>That’s not how evolution works. Evolution is survival of the fittest, not survival of the most useful. Seahorses will keep existing as long as they have food and reproduce faster than they are hunted.</p>
                    <h4><b>Follow-up Question:</b></h4>
                    <p>Ohhh, I can’t believe it. Seahorses will keep existing, really?</p>

                    <h4><b>Reason For Being Invalid</b></h4>
                    <p>Reason: “Seahorses will keep existing, really?" is in question format but is invalid, because it is not asking information but just expressing suspicious feeling.</p>

                    <hr>
                    <br>

                    <h3 style="text-align: center;">Invalid Follow-up Questions Example #2</h3>
                    <h4><b>Initial Question:</b></h4>
                    <p>Why do tapes have screen tearing and splitting, but modern media doesn’t?</p>
                    <h4><b>Initial Answer:</b></h4>
                    <p>Information on a VHS was an analog signal. To fit all of it on a tape in a linear form would end up with miles of tape. So they record the information in diagonal stripes across the tape, which is much wider than it would need to be if it just held a single track. This is then played back through a spinning head that is placed at the same angle relative to the tape as the information on it. The tape moves by the head as the head spins, reading each stripe in a fluid motion, creating the smooth video you see on playback. Pausing it stops the tape moving, but not the spinning head. So the image you see is whatever that spinning head is reading, repeated over and over. Hence the "between frames" effect.</p>
                    <h4><b>Follow-up Question:</b></h4>
                    <p>That’s right, I remember watching a Technology Connections video about how the head itself had to be skewed because of that. I remember as a kid looking inside the VCR and wondering “what is that thing, is it broken?” Now I know.</p>

                    <h4><b>Reason For Being Invalid</b></h4>
                    <p>Reason: “what is that thing, is it broken?" is just the questioner’s memory, not a question asking information in the original question or the answer.</p>
                `,
                relevant_irrelevant_example: `
                    <div style="text-align: center;"> <h3>Relevant/Irrelevant Question Guideline</h3> <h4>Our Question: </h4>
                        <p>How relevant is the follow-up question to the original question and answer?</p> 
                        <h4>Your Options:</h4> 
                        <p>
                            A. Strongly Related  
                            B. Related  
                            C. Slightly Related  
                            D. Not Related
                        </p> 
                        <p>Guideline: Assess the relevance of the follow-up question to the original question and answer. A "Strongly Related" follow-up directly builds on or deepens the original content. A "Related" follow-up has a clear connection to the topic but doesn't directly advance the conversation. A "Slightly Related" follow-up touches on a tangentially relevant idea. A "Not Related" follow-up is entirely off-topic or unrelated.</p> 
                    </div>

                    <hr>
                    <br>

                    <h3 style="text-align: center;">Example: Strongly Related Follow-up Question</h3>
                    <h4><b>Initial Question:</b></h4>
                    <p>What is the water cycle?</p>
                    <h4><b>Initial Answer:</b></h4>
                    <p>The water cycle describes how water moves through the environment, including processes like evaporation, condensation, precipitation, and collection.</p>
                    <h4><b>Follow-up Question:</b></h4>
                    <p>What role does evaporation play in the water cycle?</p>

                    <h4><b>Reason for Strong Relevance</b></h4>
                    <p>Reason: The follow-up question is strongly related because it specifically addresses one of the key processes mentioned in the original answer, seeking to understand it in more detail.</p>

                    <hr>
                    <br>

                    <h3 style="text-align: center;">Example: Related Follow-up Question</h3>
                    <h4><b>Initial Question:</b></h4>
                    <p>What is the water cycle?</p>
                    <h4><b>Initial Answer:</b></h4>
                    <p>The water cycle describes how water moves through the environment, including processes like evaporation, condensation, precipitation, and collection.</p>
                    <h4><b>Follow-up Question:</b></h4>
                    <p>How do clouds form during the water cycle?</p>

                    <h4><b>Reason for Relevance</b></h4>
                    <p>Reason: The follow-up question is related because it touches on condensation, a process mentioned in the original answer, but it focuses more on a specific phenomenon (cloud formation) without directly building on the broader description of the water cycle.</p>

                    <hr>
                    <br>

                    <h3 style="text-align: center;">Example: Slightly Related Follow-up Question</h3>
                    <h4><b>Initial Question:</b></h4>
                    <p>What is the water cycle?</p>
                    <h4><b>Initial Answer:</b></h4>
                    <p>The water cycle describes how water moves through the environment, including processes like evaporation, condensation, precipitation, and collection.</p>
                    <h4><b>Follow-up Question:</b></h4>
                    <p>What are the effects of water pollution on ecosystems?</p>

                    <h4><b>Reason for Slight Relevance</b></h4>
                    <p>Reason: The follow-up question is slightly related because it discusses water in a broader environmental context, but it does not connect directly to the specific concept of the water cycle as described in the original answer.</p>

                    <hr>
                    <br>

                    <h3 style="text-align: center;">Example: Not Related Follow-up Question</h3>
                    <h4><b>Initial Question:</b></h4>
                    <p>What is the water cycle?</p>
                    <h4><b>Initial Answer:</b></h4>
                    <p>The water cycle describes how water moves through the environment, including processes like evaporation, condensation, precipitation, and collection.</p>
                    <h4><b>Follow-up Question:</b></h4>
                    <p>What are the main causes of inflation in the economy?</p>

                    <h4><b>Reason for No Relevance</b></h4>
                    <p>Reason: The follow-up question is not related because it introduces a completely unrelated topic—economic inflation—that has no connection to the water cycle or its processes.</p>
                `,
                errors_example: `
                    <div style="text-align: center;"> 
                    <h3>Error Identification Guideline</h3> 
                    <h4>Our Question:</h4> 
                    <p>Does the follow-up question contain any of the following errors?</p> 
                    <h4>Your Options:</h4> 
                    <p>
                        A. No Errors  
                        B. Redundant (No new information added)  
                        C. Repetitive (Follow-up is too similar to the original Question)  
                        D. Wrong Semantic Collocation (Grammatically / Syntactically / Pragmatically Incorrect)  
                        E. Other Errors
                    </p> 
                    <p>Guideline: Identify any language issues in the follow-up question. "No Errors" means the follow-up question is appropriate and adds value. "Redundant" indicates the follow-up adds no new information. "Repetitive" means the follow-up is overly similar to the original question. "Wrong Semantic Collocation" refers to inappropriate or incorrect word usage. "Other Errors" can include any other problems that do not fit the listed categories.</p> 
                </div>

                <hr>
                <br>

                <h3 style="text-align: center;">Example: No Errors</h3>
                <h4><b>Initial Question:</b></h4>
                <p>What are the benefits of exercise?</p>
                <h4><b>Initial Answer:</b></h4>
                <p>Exercise improves physical health by strengthening muscles, boosting cardiovascular fitness, and maintaining a healthy weight. It also enhances mental health by reducing stress and improving mood.</p>
                <h4><b>Follow-up Question:</b></h4>
                <p>How does exercise improve mental health?</p>

                <h4><b>Reason for Having No Errors</b></h4>
                <p>Reason: The follow-up question is relevant, adds value by deepening the conversation, and has no issues with redundancy, repetition, or incorrect language use.</p>

                <hr>
                <br>

                <h3 style="text-align: center;">Example: Redundant (No new information added)</h3>
                <h4><b>Initial Question:</b></h4>
                <p>What are the benefits of exercise?</p>
                <h4><b>Initial Answer:</b></h4>
                <p>Exercise improves physical health by strengthening muscles, boosting cardiovascular fitness, and maintaining a healthy weight. It also enhances mental health by reducing stress and improving mood.</p>
                <h4><b>Follow-up Question:</b></h4>
                <p>What are the physical benefits of exercise?</p>

                <h4><b>Reason for Being Redundant</b></h4>
                <p>Reason: The follow-up question is redundant because the physical benefits of exercise were already explicitly covered in the original answer and the question does not expand or deepen the topic.</p>

                <hr>
                <br>

                <h3 style="text-align: center;">Example: Repetitive (Follow-up is too similar to the original Question)</h3>
                <h4><b>Initial Question:</b></h4>
                <p>What are the benefits of exercise?</p>
                <h4><b>Initial Answer:</b></h4>
                <p>Exercise improves physical health by strengthening muscles, boosting cardiovascular fitness, and maintaining a healthy weight. It also enhances mental health by reducing stress and improving mood.</p>
                <h4><b>Follow-up Question:</b></h4>
                <p>What are the advantages of working out?</p>

                <h4><b>Reason for Being Repetitive</b></h4>
                <p>Reason: The follow-up question is repetitive as it essentially restates the original question with slightly different wording, without contributing new information or angles.</p>

                <hr>
                <br>

                <h3 style="text-align: center;">Example: Wrong Semantic Collocation (Grammatically / Syntactically / Pragmatically Incorrect)</h3>
                <h4><b>Initial Question:</b></h4>
                <p>What are the benefits of exercise?</p>
                <h4><b>Initial Answer:</b></h4>
                <p>Exercise improves physical health by strengthening muscles, boosting cardiovascular fitness, and maintaining a healthy weight. It also enhances mental health by reducing stress and improving mood.</p>
                <h4><b>Follow-up Question:</b></h4>
                <p>How does exercise empower heartbeats?</p>

                <h4><b>Reason for Wrong Semantic Collocation</b></h4>
                <p>Reason: The follow-up question contains a wrong semantic collocation. The phrase "empower heartbeats" is unnatural and pragmatically incorrect in this context. A more appropriate phrasing would be "improve cardiovascular health."</p>

                <hr>
                <br>

                <h3 style="text-align: center;">Example: Other Errors</h3>
                <h4><b>Initial Question:</b></h4>
                <p>What are the benefits of exercise?</p>
                <h4><b>Initial Answer:</b></h4>
                <p>Exercise improves physical health by strengthening muscles, boosting cardiovascular fitness, and maintaining a healthy weight. It also enhances mental health by reducing stress and improving mood.</p>
                <h4><b>Follow-up Question:</b></h4>
                <p>Why is exercises good?</p>

                <h4><b>Reason for Containing Other Errors</b></h4>
                <p>Reason: The follow-up question contains a grammatical error ("Why is exercises good?") and lacks clarity. A better phrasing would be "Why is exercise beneficial?"</p>

                `,
                reasoning_example: `
                    <div style="text-align: center;"> <h3>Reasoning Requirement Guideline</h3> <h4>Our Question: </h4><p>Does the follow-up question require reasoning to generate?</p> <h4>Your Options:</h4> <p>A. Requires complex amount of reasoning B. Requires moderate amount of reasoning C. Requires minimal amount of reasoning D. Does not require any reasoning</p> <p>Guideline: Evaluate the level of reasoning needed to generate the follow-up question. "Complex reasoning" involves synthesizing multiple ideas or deeply analyzing information. "Moderate reasoning" requires interpreting the given content or slightly extending the discussion. "Minimal reasoning" involves simple comprehension or directly rephrasing information. "No reasoning" applies to questions that are direct repetitions or restatements without any thought process.</p> </div>

                    <hr>
                    <br>

                    <h3 style="text-align: center;">Example: Requires Complex Amount of Reasoning</h3>
                    <h4><b>Initial Question:</b></h4>
                    <p>How does renewable energy benefit the environment?</p>
                    <h4><b>Initial Answer:</b></h4>
                    <p>Renewable energy sources, like solar and wind power, reduce greenhouse gas emissions, minimize air pollution, and conserve natural resources compared to fossil fuels.</p>
                    <h4><b>Follow-up Question:</b></h4>
                    <p>What policies could governments implement to increase the adoption of renewable energy in developing countries?</p>

                    <h4><b>Reason for Requiring Complex Reasoning</b></h4>
                    <p>Reason: This follow-up question requires complex reasoning as it involves understanding the original answer, linking it to global challenges, and proposing solutions tailored to specific contexts (developing countries).</p>

                    <hr>
                    <br>

                    <h3 style="text-align: center;">Example: Requires Moderate Amount of Reasoning</h3>
                    <h4><b>Initial Question:</b></h4>
                    <p>How does renewable energy benefit the environment?</p>
                    <h4><b>Initial Answer:</b></h4>
                    <p>Renewable energy sources, like solar and wind power, reduce greenhouse gas emissions, minimize air pollution, and conserve natural resources compared to fossil fuels.</p>
                    <h4><b>Follow-up Question:</b></h4>
                    <p>How does using solar energy specifically reduce greenhouse gas emissions?</p>

                    <h4><b>Reason for Requiring Moderate Reasoning</b></h4>
                    <p>Reason: This follow-up question requires moderate reasoning as it builds on a specific point from the original answer (greenhouse gas emissions) and asks for a deeper explanation related to one renewable energy source.</p>

                    <hr>
                    <br>

                    <h3 style="text-align: center;">Example: Requires Minimal Amount of Reasoning</h3>
                    <h4><b>Initial Question:</b></h4>
                    <p>How does renewable energy benefit the environment?</p>
                    <h4><b>Initial Answer:</b></h4>
                    <p>Renewable energy sources, like solar and wind power, reduce greenhouse gas emissions, minimize air pollution, and conserve natural resources compared to fossil fuels.</p>
                    <h4><b>Follow-up Question:</b></h4>
                    <p>What are examples of renewable energy sources?</p>

                    <h4><b>Reason for Requiring Minimal Reasoning</b></h4>
                    <p>Reason: This follow-up question requires minimal reasoning because it directly asks for examples, which are already partially mentioned in the original answer.</p>

                    <hr>
                    <br>

                    <h3 style="text-align: center;">Example: Does Not Require Any Reasoning</h3>
                    <h4><b>Initial Question:</b></h4>
                    <p>How does renewable energy benefit the environment?</p>
                    <h4><b>Initial Answer:</b></h4>
                    <p>Renewable energy sources, like solar and wind power, reduce greenhouse gas emissions, minimize air pollution, and conserve natural resources compared to fossil fuels.</p>
                    <h4><b>Follow-up Question:</b></h4>
                    <p>Does renewable energy reduce greenhouse gas emissions?</p>

                    <h4><b>Reason for Requiring No Reasoning</b></h4>
                    <p>Reason: This follow-up question does not require any reasoning as it is a direct repetition of a point explicitly stated in the original answer.</p>
                `,
                new_information_example: `
                    <div style="text-align: center;"> 
                    <h3>New Information Guideline</h3> 
                    <h4>Our Question:</h4> 
                    <p>Does the follow-up question contain new information for the audience?</p> 
                    <h4>Your Options:</h4> 
                    <p>
                        A. Introduces a lot of new information  
                        B. Introduces some new information  
                        C. Introduces little new information  
                        D. Does not introduce any new information
                    </p> 
                    <p>Guideline: Evaluate whether the follow-up question enriches the topic by providing or eliciting new information. "A" indicates a significant amount of new knowledge is introduced, "B" suggests moderate enrichment, "C" implies minimal addition, and "D" means no new information is provided to the audience.</p> 
                </div>

                <hr>
                <br>

                <h3 style="text-align: center;">Example: Introduces a lot of new information</h3>
                <h4><b>Initial Question:</b></h4>
                <p>What are the benefits of regular exercise?</p>
                <h4><b>Initial Answer:</b></h4>
                <p>Exercise improves physical health, supports mental well-being, and helps maintain a healthy weight.</p>
                <h4><b>Follow-up Question:</b></h4>
                <p>How does regular exercise impact sleep quality and cognitive function?</p>

                <h4><b>Reason for Introducing a Lot of New Information</b></h4>
                <p>Reason: The follow-up question explores entirely new dimensions—sleep quality and cognitive function—that were not mentioned in the original answer, providing a significant addition to the discussion.</p>

                <hr>
                <br>

                <h3 style="text-align: center;">Example: Introduces some new information</h3>
                <h4><b>Initial Question:</b></h4>
                <p>What are the benefits of regular exercise?</p>
                <h4><b>Initial Answer:</b></h4>
                <p>Exercise improves physical health, supports mental well-being, and helps maintain a healthy weight.</p>
                <h4><b>Follow-up Question:</b></h4>
                <p>How does exercise help reduce the risk of chronic diseases?</p>

                <h4><b>Reason for Introducing Some New Information</b></h4>
                <p>Reason: The follow-up question extends the topic by asking about chronic diseases, a related but new concept that complements the original discussion without being entirely distinct.</p>

                <hr>
                <br>

                <h3 style="text-align: center;">Example: Introduces little new information</h3>
                <h4><b>Initial Question:</b></h4>
                <p>What are the benefits of regular exercise?</p>
                <h4><b>Initial Answer:</b></h4>
                <p>Exercise improves physical health, supports mental well-being, and helps maintain a healthy weight.</p>
                <h4><b>Follow-up Question:</b></h4>
                <p>Does exercise improve heart health?</p>

                <h4><b>Reason for Introducing Little New Information</b></h4>
                <p>Reason: The follow-up question adds slightly to the conversation by specifying heart health, but the concept is already implicitly covered under "physical health."</p>

                <hr>
                <br>

                <h3 style="text-align: center;">Example: Does not introduce any new information</h3>
                <h4><b>Initial Question:</b></h4>
                <p>What are the benefits of regular exercise?</p>
                <h4><b>Initial Answer:</b></h4>
                <p>Exercise improves physical health, supports mental well-being, and helps maintain a healthy weight.</p>
                <h4><b>Follow-up Question:</b></h4>
                <p>Why is exercise beneficial for your health?</p>

                <h4><b>Reason for Not Introducing Any New Information</b></h4>
                <p>Reason: The follow-up question here adds no additional information and is similar to the original question without expanding or introducing new details.</p>
                `
            };

            // MTURk Code 
            // var keys = {{ task.row_data['id'] }};
            // var questions = {{ task.row_data['question'] }};
            // var answers = {{ task.row_data['answer'] }};
            // var followUpQuestions = {{ task.row_data['generated_follow_up'] }};

            // Test Code - comment out when in production
            var keys = [1, 2, 3];
            var questions = ['What are the benefits of regular exercise?', '2', '3'];
            var answers = ['Exercise improves physical health, supports mental well-being, and helps maintain a healthy weight', '2', '3'];
            var followUpQuestions = ['Why is exercise beneficial for your health?', '2', '3'];

            // Index to keep track of questions
            var questionIndex = 0;

            // number of samples
            const sampleCount = keys.length;

            // Data to Annotate (LHS of survey)
            var dataToAnnotate = [questions, answers, followUpQuestions];
            var dataToAnnotateTitles = ["Question", "Answer", "Follow-up Question"];

            // Annotation Task Questions and Options (RHS of Survey)
            var annotationQuestions = {
                1: "Is the follow-up question a valid question?",
                2: "How relevant is the follow-up question to the original question and answer?",
                3: "Does the follow-up question contain any of the following errors?",
                4: "Does generating this follow-up question require reasoning?",
                5: "Does the follow-up question contain new information for the audience?"
            };
            var annotationOptions = {
                binary: ['Yes', 'No'],
                relatedness: ['Strongly Related', 'Related', 'Slightly Related', 'Not Related'],
                errors: ['No Errors', 'Redundant (No new information added)', 'Repetitive (Follow-up is too similar to the original Question)', 'Wrong Semantic Collocation (Grammatically / Syntactically / Pragmatically Incorrect)', 'Other Errors'],
                reasoning: ['Requires <u>complex</u> amount of reasoning', 'Requires <u>moderate</u> amount of reasoning', 'Requires <u>minimal</u> amount of reasoning', '<u>Does not</u> require any reasoning'],
                newInformation: ['Introduces <u>a lot</u> of new information', 'Introduces <u>some</u>  new information', 'Introduces <u>little</u>  new information', '<u>Does not</u>  introduce any new information']
            };
            var annotationOptionsShortened = {
                binary: ['Yes', 'No'],
                relatedness: ['Strongly Related', 'Related', 'Slightly Related', 'Not Related'],
                errors: ['No Errors', 'Redundant', 'Repetitive', 'Wrong Semantic Collocation', 'Other Errors'],
                reasoning: ['Complex Reasoning', 'Moderate Reasoning', 'Minimal Reasoning', 'No Reasoning'],
                newInformation: ['A lot of Information', 'Some Information', 'Little Information', 'No Information']
            };

            // **Generate example content
            function changeContent(example_name, button) {
                if (button) {
                    const buttons = document.querySelectorAll('.example-buttons');
                    buttons.forEach(btn => {
                        btn.classList.remove('selected');
                    });

                    button.classList.add('selected');
                }

                document.getElementById('right-section').innerHTML = examples[example_name];
            }

            // *Generate the Survey's LHS HTML
            function generateHTMLDataToAnnotate() {
                var titlesIndex = 0;

                var dataToAnnotateHTML = "";
                dataToAnnotate.forEach(function (data, index) {
                    dataToAnnotateHTML += `<p id="example_` + index + `"><b>` + dataToAnnotateTitles[titlesIndex] + `: </b>` + data[questionIndex] + `</p>`;

                    titlesIndex++;
                });
                $("#data_container").html(dataToAnnotateHTML);
            }

            // *Generate the Survey's RHS HTML
            function generateHTMLAnnotation() {
                allAnnotationQuestionsHTML = ``;
                for (let i = 0; i < sampleCount; i++) {
                    var nameBase = keys[i] + `_`;
                    var relatednessNameBase = nameBase + `relatedness`;
                    var validnessNameBase = nameBase + `validness`;
                    var relevanceNameBase = nameBase + `relevance`;
                    var errorNameBase = nameBase + `error`;
                    var reasoningNameBase = nameBase + `reasoning`;
                    var newInformationNameBase = nameBase + `newInformation`;
                    var annotationQuestionsHTML = `<div id="question-block-` + i + `" class="question-block" style="display: none;">`

                    Object.entries(annotationQuestions).forEach(([key, value]) => {
                        if (key == 1) {
                            annotationQuestionsHTML += `
                            <div class="first-question" data-question="` + key + `">
                                <h4>Question ` + key + `:</h4>
                                <div>
                                    <strong>` + value + `</strong><br/>
                                    <label><input type="radio" name="` + validnessNameBase + `" value="` + annotationOptionsShortened.binary[0] + `" required onclick=toggleRemainingQuestions(true)>` + annotationOptions.binary[0] + `</label>
                                    <br>

                                    <label><input type="radio" name="` + validnessNameBase + `" value="` + annotationOptionsShortened.binary[1] + `" onclick=toggleRemainingQuestions(false)>` + annotationOptions.binary[1] + `</label>
                                    <br>
                                </div>
                                <br>
                            </div>
                            <hr/>`;
                        }
                        if (key == 2) {
                            annotationQuestionsHTML += `
                            <div id="remaining-questions" class="remaining-questions">
                            <div class="ratings-group" data-question="` + key + `">
                                <br>
                                <h4>Question ` + key + `</h4>
                                <div>
                                    <strong>` + value + `:</strong><br/>
                                    <label><input type="radio" name="` + relevanceNameBase + `" value="` + annotationOptionsShortened.relatedness[0] + `">` + annotationOptions.relatedness[0] + `</label>
                                    <br>

                                    <label><input type="radio" name="` + relevanceNameBase + `" value="` + annotationOptionsShortened.relatedness[1] + `"> ` + annotationOptions.relatedness[1] + `</label>
                                    <br>

                                    <label><input type="radio" name="` + relevanceNameBase + `" value="` + annotationOptionsShortened.relatedness[2] + `"> ` + annotationOptions.relatedness[2] + `</label>
                                    <br>

                                    <label><input type="radio" name="` + relevanceNameBase + `" value="` + annotationOptionsShortened.relatedness[3] + `"> ` + annotationOptions.relatedness[3] + `</label>
                                    <br>
                                </div>
                                <br>
                            </div>
                            <hr/>`;
                        }
                        if (key == 3) {
                            annotationQuestionsHTML += `
                            <div class="ratings-group" data-question="` + key + `">
                                <br>
                                <h4>Question ` + key + `:</h4>
                                <div>
                                    <strong>` + value + `</strong><br/>
                                    <label><input type="checkbox" name="` + errorNameBase + `" value="` + annotationOptionsShortened.errors[0] + `">` + annotationOptions.errors[0] + `</label>
                                    <br>

                                    <label><input type="checkbox" name="` + errorNameBase + `" value="` + annotationOptionsShortened.errors[1] + `">` + annotationOptions.errors[1] + `</label>
                                    <br>

                                    <label><input type="checkbox" name="` + errorNameBase + `" value="` + annotationOptionsShortened.errors[2] + `">` + annotationOptions.errors[2] + `</label>
                                    <br>

                                    <label><input type="checkbox" name="` + errorNameBase + `" value="` + annotationOptionsShortened.errors[3] + `">` + annotationOptions.errors[3] + `</label>
                                    <br>

                                    <label><input type="checkbox" name="` + errorNameBase + `" value="` + annotationOptionsShortened.errors[4] + `">` + annotationOptions.errors[4] + `</label>
                                    <br>
                                </div>
                                <br>
                            </div>
                            <hr/>`;
                        }
                        if (key == 4) {
                            annotationQuestionsHTML += `
                            <div class="ratings-group" data-question="` + key + `">
                                <br>
                                <h4>Question ` + key + `:</h4>
                                <div>
                                    <strong>` + value + `</strong><br/>
                                    <label><input type="radio" name="` + reasoningNameBase + `" value="` + annotationOptionsShortened.reasoning[0] + `" >` + annotationOptions.reasoning[0] + `</label>
                                    <br>

                                    <label><input type="radio" name="` + reasoningNameBase + `" value="` + annotationOptionsShortened.reasoning[1] + `" > ` + annotationOptions.reasoning[1] + `</label>
                                    <br>

                                    <label><input type="radio" name="` + reasoningNameBase + `" value="` + annotationOptionsShortened.reasoning[2] + `" > ` + annotationOptions.reasoning[2] + `</label>
                                    <br>

                                    <label><input type="radio" name="` + reasoningNameBase + `" value="` + annotationOptionsShortened.reasoning[3] + `" > ` + annotationOptions.reasoning[3] + `</label>
                                    <br>

                                </div>
                                <br>
                            </div>
                            <hr/>`;
                        }
                        if (key == 5) {
                            annotationQuestionsHTML += `
                            <div class="ratings-group" data-question="` + key + `">
                                <br>
                                <h4>Question ` + key + `</h4>
                                <div>
                                    <strong>` + value + `:</strong><br/>
                                    <label><input type="radio" name="` + newInformationNameBase + `" value="` + annotationOptionsShortened.newInformation[0] + `" >` + annotationOptions.newInformation[0] + `</label>
                                    <br>

                                    <label><input type="radio" name="` + newInformationNameBase + `" value="` + annotationOptionsShortened.newInformation[1] + `" > ` + annotationOptions.newInformation[1] + `</label>
                                    <br>

                                    <label><input type="radio" name="` + newInformationNameBase + `" value="` + annotationOptionsShortened.newInformation[2] + `" > ` + annotationOptions.newInformation[2] + `</label>
                                    <br>

                                    <label><input type="radio" name="` + newInformationNameBase + `" value="` + annotationOptionsShortened.newInformation[3] + `" > ` + annotationOptions.newInformation[3] + `</label>
                                    <br>

                                </div>
                                <br>
                            </div>
                            <hr/>
                            </div>`;
                        }
                    });

                    annotationQuestionsHTML += `</div>`
                    allAnnotationQuestionsHTML += annotationQuestionsHTML
                }
                $("#annotation-questions-container").html(allAnnotationQuestionsHTML);
            }
            
            // Display remaining questions only if the user answers Yes to the Validity question
            function toggleRemainingQuestions(show) {
                const remainingQuestions = document.querySelectorAll('.remaining-questions');
                remainingQuestions.forEach(element => {
                    element.style.display = show ? 'block' : 'none';
                });
            }

            // Updates progress bar 
            function updateProgressBar() {
                var current = questionIndex + 1; // +1 to make it 1-based
                var percentage = (current / sampleCount) * 100;
                $("#progress-bar").css('width', percentage + '%');
            }

            // validates input to radio buttons before moving to the next task
            function validateCurrentStep() {
                const questionBlock = document.querySelector(`#question-block-` + questionIndex);

                if (!questionBlock) {
                    console.error('Question block not found!');
                    return false;
                }
                
                // check the value of the first (validity) question
                noRadioButton = questionBlock.querySelector('.first-question').querySelector('input[value="No"]:checked');   
                if (noRadioButton) {
                    return true
                }

                const ratingGroups = questionBlock.querySelectorAll('.ratings-group');
                let valid = true;

                ratingGroups.forEach(group => {
                    const radioSelected = group.querySelector('input[type="radio"]:checked');
                    const checkboxSelected = group.querySelector('input[type="checkbox"]:checked');

                    // Check if there's at least one selection for both input types
                    if (!radioSelected && !checkboxSelected) {
                        valid = false;
                    }
                });

                return valid
            }

            function showQuestion() {
                toggleRemainingQuestions(false)
                $(".question-block").hide();
                $(`#question-block-` + questionIndex).show();
                generateHTMLDataToAnnotate();
                updateProgressBar();
            }

            // Listeners
            // The Next button listener
            $("#next-btn").on('click', function () {
                // Ensure all toggles have been selectef for the current HIT
                if (!validateCurrentStep()) {
                    $("#validation-message").show();
                    return;
                } else {
                    $("#validation-message").hide();
                }

                // Conditionally Disable/Enable Next & Submit buttons
                if (questionIndex < sampleCount - 1) {
                    questionIndex++;
                    showQuestion();
                    $("#crowd-button").prop('disabled', true);
                    $('#next-btn').prop('disabled', false);
                } else {
                    $("#crowd-button").prop('disabled', false);
                    $('#next-btn').prop('disabled', true);
                }
            });

            $(document).ready(function () {
                changeContent('valid_invalid_example', null);
                generateHTMLAnnotation();
                showQuestion();
            });
        </script>
    </div>
</body>

</html>